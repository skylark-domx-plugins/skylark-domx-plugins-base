{"version":3,"sources":["instantiate.js"],"names":["define","datax","plugins","Plugin","pluginKlasses","instantiate","elm","pluginName","options","arg1","arg2","arg3","arg4","arg5","pair","split","instanceDataName","pluginInstance","data","Error","destroy","undefined","reset","pluginKlass","this","prototype"],"mappings":";;;;;;;AAAAA,QACI,oBACA,YACA,YACD,SACCC,EACAC,EACAC,GAEA,aAEA,IAAIC,EAAgBF,EAAQE,cAK5B,SAASC,EAAYC,EAAIC,EAAWC,EAAQC,EAAKC,EAAKC,EAAKC,EAAKC,GAC5D,IAAIC,EAAOP,EAAWQ,MAAM,KACxBC,EAAmBF,EAAK,GAC5BP,EAAaO,EAAK,GAEbE,IACDA,EAAmBT,GAGvB,IAAIU,EAAiBhB,EAAMiB,KAAMZ,EAAKU,GAEtC,GAAgB,aAAZR,EACA,OAAOS,EACJ,GAAgB,YAAZT,EAAuB,CAC9B,IAAKS,EACD,MAAM,IAAIE,MAAO,sCAErBF,EAAeG,UAEfH,OAAiBI,OAEjB,GAAKJ,EAOMT,GACPS,EAAeK,MAAMd,OARJ,CACjB,QAAgBa,IAAZb,GAA4C,iBAAZA,EAChC,MAAM,IAAIW,MAAO,sCAGrBF,EAAiB,IAAIM,EADHnB,EAAcG,IACCD,EAAIE,EAAQC,EAAKC,EAAKC,EAAKC,EAAKC,GACjEZ,EAAMiB,KAAMZ,EAAKU,EAAiBC,GAM1C,OAAOA,EAOX,OAJAd,EAAOE,YAAc,SAASC,EAAIE,GAC9B,OAAOH,EAAYC,EAAIkB,KAAKC,UAAUlB,WAAWC,IAG7CN,EAAQG,YAAcA","file":"../instantiate.js","sourcesContent":["define([\r\n    \"skylark-domx-data\",\r\n    \"./plugins\",\r\n    \"./plugin\"\r\n], function(\r\n    datax, \r\n    plugins,\r\n    Plugin\r\n) {\r\n    \"use strict\";\r\n\r\n    var pluginKlasses = plugins.pluginKlasses;\r\n\r\n    /*\r\n     * Create or get or destory a plugin instance assocated with the element.\r\n     */\r\n    function instantiate(elm,pluginName,options,arg1,arg2,arg3,arg4,arg5) {\r\n        var pair = pluginName.split(\":\"),\r\n            instanceDataName = pair[1];\r\n        pluginName = pair[0];\r\n\r\n        if (!instanceDataName) {\r\n            instanceDataName = pluginName;\r\n        }\r\n\r\n        var pluginInstance = datax.data( elm, instanceDataName );\r\n\r\n        if (options === \"instance\") {\r\n            return pluginInstance;\r\n        } else if (options === \"destroy\") {\r\n            if (!pluginInstance) {\r\n                throw new Error (\"The plugin instance is not existed\");\r\n            }\r\n            pluginInstance.destroy();\r\n            //datax.removeData( elm, pluginName);\r\n            pluginInstance = undefined;\r\n        } else {\r\n            if (!pluginInstance) {\r\n                if (options !== undefined && typeof options !== \"object\") {\r\n                    throw new Error (\"The options must be a plain object\");\r\n                }\r\n                var pluginKlass = pluginKlasses[pluginName]; \r\n                pluginInstance = new pluginKlass(elm,options,arg1,arg2,arg3,arg4,arg5);\r\n                datax.data( elm, instanceDataName,pluginInstance );\r\n            } else if (options) {\r\n                pluginInstance.reset(options);\r\n            }\r\n        }\r\n\r\n        return pluginInstance;\r\n    }\r\n\r\n    Plugin.instantiate = function(elm,options) {\r\n        return instantiate(elm,this.prototype.pluginName,options);\r\n    };\r\n\r\n    return  plugins.instantiate = instantiate;\r\n});"]}